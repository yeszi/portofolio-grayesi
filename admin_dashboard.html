<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Content - Diskominfo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@supabase/supabase-js"></script>
</head>
<body class="bg-gray-100">

  <header class="flex items-center justify-between bg-white px-4 py-3 border-b shadow md:hidden">
    <h1 class="text-lg font-semibold text-gray-800">ADMIN</h1>
    <button id="hamburger" class="text-gray-800 focus:outline-none text-2xl">
      ☰
    </button>
  </header>

  <div class="flex h-screen overflow-hidden">

    <aside id="sidebar" class="fixed md:static top-0 left-0 h-full w-64 bg-white border-r shadow-md z-50 transform -translate-x-full md:translate-x-0 transition-transform duration-300 ease-in-out">
      <div class="p-6 border-b flex justify-between items-center md:block">
        <h1 class="text-xl font-semibold text-primary">ADMIN</h1>
        <button id="closeSidebar" class="md:hidden text-xl text-gray-800">✕</button>
      </div>
      <nav class="p-4">
        <ul class="space-y-2 text-gray-700 font-medium">
          <li><a href="edit.html" class="block hover:text-red-600">✏️ Edit Content</a></li>
          <li><a href="tambah.html" class="block hover:text-red-600">➕ Add New Content</a></li>
          <li><a href="form.html" class="block hover:text-red-600">📩 Form</a></li>
          <li>
            <button onclick="logout()" class="w-full text-left hover:text-red-600">👋 Log Out</button>
          </li>
        </ul>
      </nav>
    </aside>

<main class="flex-1 p-6 overflow-y-auto relative bg-cover bg-center" 
      style="background-image: url('https://source.unsplash.com/1600x900/?technology');">
  <!-- Layer hitam blur -->
  <div class="absolute inset-0 bg-black bg-opacity-60 backdrop-blur-md"></div>

  <!-- Konten utama -->
  <div class="relative z-10 flex flex-col items-center justify-center min-h-[70vh] text-center text-white">
    
    <!-- Foto Profil -->
    <img src="https://ui-avatars.com/api/?name=Yess&background=fff&color=0d6efd&size=128" 
         alt="Foto Yess" 
         class="w-32 h-32 rounded-full shadow-lg mb-4 border-4 border-white" />

    <!-- Teks Sambutan -->
    <h2 class="text-3xl font-bold mb-2">Selamat datang, Yess! 👋</h2>
    <p class="text-lg text-gray-300 max-w-xl">
      Ini adalah dashboard admin Diskominfo Tanjungpinang. Gunakan menu di samping kiri untuk mengelola konten seperti berita, galeri, artikel, dan lainnya.
    </p>

  </div>
</main>

  </div>

  <script>
    const hamburger = document.getElementById("hamburger");
    const sidebar = document.getElementById("sidebar");
    const closeSidebar = document.getElementById("closeSidebar");

    hamburger.addEventListener("click", () => {
      sidebar.classList.remove("-translate-x-full");
    });

    closeSidebar.addEventListener("click", () => {
      sidebar.classList.add("-translate-x-full");
    });
  </script>

  <script>
    const supabase = window.supabase.createClient(
      'https://owqdtbzhnxbxdsjrlzsa.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im93cWR0YnpobnhieGRzanJsenNhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA4NzA1MjMsImV4cCI6MjA2NjQ0NjUyM30.cNmvpc_pBV89o9GHMU2CL0bSdgkdavAZuxB_w0Gv4gA'
    );

    supabase.auth.getSession().then(({ data: { session } }) => {
      const email = session?.user?.email;
      if (!session || email !== "grayesi.silitonga@gmail.com") {
        alert("Akses ditolak. Silakan login kembali.");
        window.location.href = "login.html";
      }
    }).catch(err => {
      alert("Terjadi kesalahan saat verifikasi login.");
      window.location.href = "login.html";
    });

    async function logout() {
      try {
        const { error } = await supabase.auth.signOut();
        if (error) {
          alert('Gagal logout: ' + error.message);
        } else {
          window.location.href = "login.html";
        }
      } catch (e) {
        alert("Terjadi kesalahan saat logout.");
      }
    }
  </script>
</body>
</html>
